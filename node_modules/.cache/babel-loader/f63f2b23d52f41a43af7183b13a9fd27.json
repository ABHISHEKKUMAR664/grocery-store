{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\Desktop\\\\grocery-store-college\\\\src\\\\features\\\\product-listing\\\\index.js\";\nimport React from \"react\";\nimport ProductListItem from \"./product-list-item\";\nimport { Grid, Card, Dimmer, Loader, Menu, Input, Pagination } from \"semantic-ui-react\";\nimport { connect } from \"react-redux\";\nimport { paginate } from \"../../utils/paginate\";\nimport fetchApi from \"../../modules/fetch-api\";\n\nclass ProductListing extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loading: true,\n      search: \"\",\n      activeItem: \"All\",\n      filteredProducts: [],\n      pageSize: 12,\n      activePage: 1\n    };\n\n    this.handleChange = input => {\n      this.setState({\n        [input.target.name]: input.target.value\n      });\n      const lowercasedSearchInput = this.state.search.toLowerCase(); //console.log(\"Search input: \", lowercasedSearchInput);\n      //search filtered products in state\n\n      const searchResults = this.state.products.filter(product => {\n        let lowercasedProducts = product.name.toLowerCase();\n        return lowercasedProducts.includes(lowercasedSearchInput);\n      });\n      this.setState({\n        filteredProducts: searchResults\n      });\n    };\n\n    this.handlePageChange = (e, {\n      activePage\n    }) => {\n      this.setState({\n        activePage\n      });\n    };\n\n    this.handleItemClickAll = (e, {\n      name\n    }) => {\n      this.setState({\n        activeItem: name,\n        filteredProducts: this.props.products,\n        activePage: 1\n      });\n    };\n\n    this.handleItemClickFruitsAndVegetables = (e, {\n      name\n    }) => {\n      const filtered = this.state.products.filter(product => product.category === \"Fruits & Vegetables\");\n      this.setState({\n        activeItem: name,\n        filteredProducts: filtered,\n        activePage: 1\n      });\n    };\n\n    this.handleItemClickBeverages = (e, {\n      name\n    }) => {\n      const filtered = this.state.products.filter(product => product.category === \"Beverages\");\n      this.setState({\n        activeItem: name,\n        filteredProducts: filtered,\n        activePage: 1\n      });\n    };\n\n    this.handleItemClickBakeryAndBread = (e, {\n      name\n    }) => {\n      const filtered = this.state.products.filter(product => product.category === \"Bakery & Bread\");\n      this.setState({\n        activeItem: name,\n        filteredProducts: filtered,\n        activePage: 1\n      });\n    };\n\n    this.handleItemClickDairyAndEggs = (e, {\n      name\n    }) => {\n      const filtered = this.state.products.filter(product => product.category === \"Dairy & Eggs\");\n      this.setState({\n        activeItem: name,\n        filteredProducts: filtered,\n        activePage: 1\n      });\n    };\n\n    this.handleItemClickFrozenFoods = (e, {\n      name\n    }) => {\n      const filtered = this.state.products.filter(product => product.category === \"Frozen Food\");\n      this.setState({\n        activeItem: name,\n        filteredProducts: filtered,\n        activePage: 1\n      });\n    };\n\n    this.handleItemClickPantry = (e, {\n      name\n    }) => {\n      const filtered = this.state.products.filter(product => product.category === \"Pantry\");\n      this.setState({\n        activeItem: name,\n        filteredProducts: filtered,\n        activePage: 1\n      });\n    };\n  }\n\n  componentDidMount() {\n    const loadProducts = this.props.loadProducts;\n    fetchApi(\"get\", \"https://grocery-delivery-backend.herokuapp.com/api/v1/products\").then(json => {\n      // fetchApi(\n      //   \"get\",\n      //   \"https://grocery-delivery-backend.herokuapp.com/api/v1/products\"\n      // ).then(json => {\n      loadProducts(json); //console.log(\"Products loaded:\", json);\n\n      this.setState({\n        loading: false,\n        products: this.props.products,\n        filteredProducts: this.props.products\n      });\n    });\n  } //Collect info as it is typed and update state\n\n\n  render() {\n    const _this$props = this.props,\n          addToCart = _this$props.addToCart,\n          removeFromCart = _this$props.removeFromCart,\n          cart = _this$props.cart;\n    const count = this.state.filteredProducts.length;\n    const _this$state = this.state,\n          activeItem = _this$state.activeItem,\n          pageSize = _this$state.pageSize,\n          filteredProducts = _this$state.filteredProducts,\n          activePage = _this$state.activePage;\n    const pagesCount = Math.ceil(count / pageSize);\n    const paginatedProducts = paginate(filteredProducts, activePage, pageSize); //console.log(\"Home State: \", this.state);\n    //console.log(\"Paginated Products\", paginatedProducts);\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, this.state.loading ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(Dimmer, {\n      active: true,\n      inverted: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(Loader, {\n      size: \"massive\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, \"Picking fresh products for you to shop!\"))) : React.createElement(Grid, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(Grid.Column, {\n      width: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(Menu, {\n      vertical: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, React.createElement(Menu.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(Input, {\n      icon: \"search\",\n      name: \"search\",\n      placeholder: \"Search...\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    })), React.createElement(Menu.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(Menu.Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, \"Products\"), React.createElement(Menu.Menu, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(Menu.Item, {\n      name: \"All\",\n      active: activeItem === \"All\",\n      onClick: this.handleItemClickAll,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }), React.createElement(Menu.Item, {\n      name: \"Fruits and Vegetables\",\n      active: activeItem === \"Fruits and Vegetables\",\n      onClick: this.handleItemClickFruitsAndVegetables,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }), React.createElement(Menu.Item, {\n      name: \"Beverages\",\n      active: activeItem === \"Beverages\",\n      onClick: this.handleItemClickBeverages,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }), React.createElement(Menu.Item, {\n      name: \"Bakery and Bread\",\n      active: activeItem === \"Bakery and Bread\",\n      onClick: this.handleItemClickBakeryAndBread,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }), React.createElement(Menu.Item, {\n      name: \"Dairy and Eggs\",\n      active: activeItem === \"Dairy and Eggs\",\n      onClick: this.handleItemClickDairyAndEggs,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }), React.createElement(Menu.Item, {\n      name: \"Frozen Foods\",\n      active: activeItem === \"Frozen Foods\",\n      onClick: this.handleItemClickFrozenFoods,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }), React.createElement(Menu.Item, {\n      name: \"Pantry\",\n      active: activeItem === \"Pantry\",\n      onClick: this.handleItemClickPantry,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }))))), React.createElement(Grid.Column, {\n      width: 13,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(Card.Group, {\n      itemsPerRow: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, paginatedProducts.map(product => React.createElement(ProductListItem, {\n      key: product.id,\n      product: product,\n      addToCart: addToCart,\n      removeFromCart: removeFromCart,\n      cartItem: cart.filter(cartItem => cartItem.id === product.id)[0],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }))))), React.createElement(\"div\", {\n      align: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }), React.createElement(Pagination, {\n      activePage: activePage,\n      siblingRange: 10,\n      totalPages: pagesCount,\n      onPageChange: this.handlePageChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    })));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    cart: state.cart,\n    products: state.products\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    loadProducts: products => {\n      dispatch({\n        type: \"LOAD\",\n        payload: products\n      });\n    },\n    addToCart: item => {\n      dispatch({\n        type: \"ADD\",\n        payload: item\n      });\n    },\n    removeFromCart: item => {\n      dispatch({\n        type: \"REMOVE\",\n        payload: item\n      });\n    }\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductListing);","map":{"version":3,"sources":["C:/Users/hp/Desktop/grocery-store-college/src/features/product-listing/index.js"],"names":["React","ProductListItem","Grid","Card","Dimmer","Loader","Menu","Input","Pagination","connect","paginate","fetchApi","ProductListing","Component","state","loading","search","activeItem","filteredProducts","pageSize","activePage","handleChange","input","setState","target","name","value","lowercasedSearchInput","toLowerCase","searchResults","products","filter","product","lowercasedProducts","includes","handlePageChange","e","handleItemClickAll","props","handleItemClickFruitsAndVegetables","filtered","category","handleItemClickBeverages","handleItemClickBakeryAndBread","handleItemClickDairyAndEggs","handleItemClickFrozenFoods","handleItemClickPantry","componentDidMount","loadProducts","then","json","render","addToCart","removeFromCart","cart","count","length","pagesCount","Math","ceil","paginatedProducts","map","id","cartItem","mapStateToProps","mapDispatchToProps","dispatch","type","payload","item"],"mappings":"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","sourcesContent":["import React from \"react\";\r\n\r\nimport ProductListItem from \"./product-list-item\";\r\nimport {\r\n  Grid,\r\n  Card,\r\n  Dimmer,\r\n  Loader,\r\n  Menu,\r\n  Input,\r\n  Pagination\r\n} from \"semantic-ui-react\";\r\nimport { connect } from \"react-redux\";\r\nimport { paginate } from \"../../utils/paginate\";\r\n\r\nimport fetchApi from \"../../modules/fetch-api\";\r\n\r\nclass ProductListing extends React.Component {\r\n  state = {\r\n    loading: true,\r\n    search: \"\",\r\n    activeItem: \"All\",\r\n    filteredProducts: [],\r\n    pageSize: 12,\r\n    activePage: 1\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { loadProducts } = this.props;\r\n    fetchApi(\r\n      \"get\",\r\n      \"https://grocery-delivery-backend.herokuapp.com/api/v1/products\"\r\n    ).then(json => {\r\n      // fetchApi(\r\n      //   \"get\",\r\n      //   \"https://grocery-delivery-backend.herokuapp.com/api/v1/products\"\r\n      // ).then(json => {\r\n      loadProducts(json);\r\n      //console.log(\"Products loaded:\", json);\r\n      this.setState({\r\n        loading: false,\r\n        products: this.props.products,\r\n        filteredProducts: this.props.products\r\n      });\r\n    });\r\n  }\r\n\r\n  //Collect info as it is typed and update state\r\n  handleChange = input => {\r\n    this.setState({\r\n      [input.target.name]: input.target.value\r\n    });\r\n    const lowercasedSearchInput = this.state.search.toLowerCase();\r\n    //console.log(\"Search input: \", lowercasedSearchInput);\r\n\r\n    //search filtered products in state\r\n    const searchResults = this.state.products.filter(product => {\r\n      let lowercasedProducts = product.name.toLowerCase();\r\n      return lowercasedProducts.includes(lowercasedSearchInput);\r\n    });\r\n\r\n    this.setState({\r\n      filteredProducts: searchResults\r\n    });\r\n  };\r\n\r\n  handlePageChange = (e, { activePage }) => {\r\n    this.setState({ activePage });\r\n  };\r\n\r\n  handleItemClickAll = (e, { name }) => {\r\n    this.setState({\r\n      activeItem: name,\r\n      filteredProducts: this.props.products,\r\n      activePage: 1\r\n    });\r\n  };\r\n\r\n  handleItemClickFruitsAndVegetables = (e, { name }) => {\r\n    const filtered = this.state.products.filter(\r\n      product => product.category === \"Fruits & Vegetables\"\r\n    );\r\n    this.setState({\r\n      activeItem: name,\r\n      filteredProducts: filtered,\r\n      activePage: 1\r\n    });\r\n  };\r\n\r\n  handleItemClickBeverages = (e, { name }) => {\r\n    const filtered = this.state.products.filter(\r\n      product => product.category === \"Beverages\"\r\n    );\r\n    this.setState({\r\n      activeItem: name,\r\n      filteredProducts: filtered,\r\n      activePage: 1\r\n    });\r\n  };\r\n\r\n  handleItemClickBakeryAndBread = (e, { name }) => {\r\n    const filtered = this.state.products.filter(\r\n      product => product.category === \"Bakery & Bread\"\r\n    );\r\n    this.setState({\r\n      activeItem: name,\r\n      filteredProducts: filtered,\r\n      activePage: 1\r\n    });\r\n  };\r\n\r\n  handleItemClickDairyAndEggs = (e, { name }) => {\r\n    const filtered = this.state.products.filter(\r\n      product => product.category === \"Dairy & Eggs\"\r\n    );\r\n    this.setState({\r\n      activeItem: name,\r\n      filteredProducts: filtered,\r\n      activePage: 1\r\n    });\r\n  };\r\n\r\n  handleItemClickFrozenFoods = (e, { name }) => {\r\n    const filtered = this.state.products.filter(\r\n      product => product.category === \"Frozen Food\"\r\n    );\r\n    this.setState({\r\n      activeItem: name,\r\n      filteredProducts: filtered,\r\n      activePage: 1\r\n    });\r\n  };\r\n\r\n  handleItemClickPantry = (e, { name }) => {\r\n    const filtered = this.state.products.filter(\r\n      product => product.category === \"Pantry\"\r\n    );\r\n    this.setState({\r\n      activeItem: name,\r\n      filteredProducts: filtered,\r\n      activePage: 1\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { addToCart, removeFromCart, cart } = this.props;\r\n    const { length: count } = this.state.filteredProducts;\r\n    const { activeItem, pageSize, filteredProducts, activePage } = this.state;\r\n\r\n    const pagesCount = Math.ceil(count / pageSize);\r\n    const paginatedProducts = paginate(filteredProducts, activePage, pageSize);\r\n    //console.log(\"Home State: \", this.state);\r\n    //console.log(\"Paginated Products\", paginatedProducts);\r\n\r\n    return (\r\n      <div>\r\n        {this.state.loading ? (\r\n          <div>\r\n            <Dimmer active inverted>\r\n              <Loader size=\"massive\">\r\n                Picking fresh products for you to shop!\r\n              </Loader>\r\n            </Dimmer>\r\n          </div>\r\n        ) : (\r\n          <Grid>\r\n            <Grid.Column width={3}>\r\n              <Menu vertical>\r\n                <Menu.Item>\r\n                  <Input\r\n                    icon=\"search\"\r\n                    name=\"search\"\r\n                    placeholder=\"Search...\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </Menu.Item>\r\n                <Menu.Item>\r\n                  <Menu.Header>Products</Menu.Header>\r\n\r\n                  <Menu.Menu>\r\n                    <Menu.Item\r\n                      name=\"All\"\r\n                      active={activeItem === \"All\"}\r\n                      onClick={this.handleItemClickAll}\r\n                    />\r\n                    <Menu.Item\r\n                      name=\"Fruits and Vegetables\"\r\n                      active={activeItem === \"Fruits and Vegetables\"}\r\n                      onClick={this.handleItemClickFruitsAndVegetables}\r\n                    />\r\n                    <Menu.Item\r\n                      name=\"Beverages\"\r\n                      active={activeItem === \"Beverages\"}\r\n                      onClick={this.handleItemClickBeverages}\r\n                    />\r\n                    <Menu.Item\r\n                      name=\"Bakery and Bread\"\r\n                      active={activeItem === \"Bakery and Bread\"}\r\n                      onClick={this.handleItemClickBakeryAndBread}\r\n                    />\r\n                    <Menu.Item\r\n                      name=\"Dairy and Eggs\"\r\n                      active={activeItem === \"Dairy and Eggs\"}\r\n                      onClick={this.handleItemClickDairyAndEggs}\r\n                    />\r\n                    <Menu.Item\r\n                      name=\"Frozen Foods\"\r\n                      active={activeItem === \"Frozen Foods\"}\r\n                      onClick={this.handleItemClickFrozenFoods}\r\n                    />\r\n                    <Menu.Item\r\n                      name=\"Pantry\"\r\n                      active={activeItem === \"Pantry\"}\r\n                      onClick={this.handleItemClickPantry}\r\n                    />\r\n                  </Menu.Menu>\r\n                </Menu.Item>\r\n              </Menu>\r\n            </Grid.Column>\r\n            <Grid.Column width={13}>\r\n              <Card.Group itemsPerRow={4}>\r\n                {/* {this.state.filteredProducts.length === 0\r\n                  ? products.map(product => (\r\n                      <ProductListItem\r\n                        key={product.id}\r\n                        product={product}\r\n                        addToCart={addToCart}\r\n                        removeFromCart={removeFromCart}\r\n                        cartItem={\r\n                          cart.filter(cartItem => cartItem.id === product.id)[0]\r\n                        }\r\n                      />\r\n                    ))\r\n                  : this.state.filteredProducts.map(product => (\r\n                      <ProductListItem\r\n                        key={product.id}\r\n                        product={product}\r\n                        addToCart={addToCart}\r\n                        removeFromCart={removeFromCart}\r\n                        cartItem={\r\n                          cart.filter(cartItem => cartItem.id === product.id)[0]\r\n                        }\r\n                      />\r\n                    ))} */}\r\n\r\n                {paginatedProducts.map(product => (\r\n                  <ProductListItem\r\n                    key={product.id}\r\n                    product={product}\r\n                    addToCart={addToCart}\r\n                    removeFromCart={removeFromCart}\r\n                    cartItem={\r\n                      cart.filter(cartItem => cartItem.id === product.id)[0]\r\n                    }\r\n                  />\r\n                ))}\r\n              </Card.Group>\r\n            </Grid.Column>\r\n          </Grid>\r\n        )}\r\n        {/* <PaginationCompact\r\n          itemsCount={count}\r\n          pageSize={pageSize}\r\n          currentPage={currentPage}\r\n          onPageChange={this.handlePageChange}\r\n        /> */}\r\n        <div align=\"right\">\r\n          <br></br>\r\n          <Pagination\r\n            activePage={activePage}\r\n            siblingRange={10}\r\n            totalPages={pagesCount}\r\n            onPageChange={this.handlePageChange}\r\n          ></Pagination>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    cart: state.cart,\r\n    products: state.products\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    loadProducts: products => {\r\n      dispatch({ type: \"LOAD\", payload: products });\r\n    },\r\n    addToCart: item => {\r\n      dispatch({ type: \"ADD\", payload: item });\r\n    },\r\n    removeFromCart: item => {\r\n      dispatch({ type: \"REMOVE\", payload: item });\r\n    }\r\n  };\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(ProductListing);\r\n"]},"metadata":{},"sourceType":"module"}